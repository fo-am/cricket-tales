{% extends "base.html" %}

{% block top_layer %}
<h1>Wild Cricket Tales: Detail of {{ cricket.name }}</h1>

<div id="footnotediv"></div>
<div id="test"></div>
{% endblock %}

{% block bottom_layer %}

<script>
// ensure the web page (DOM) has loaded
document.addEventListener("DOMContentLoaded", function () {

// Create a popcorn instance by calling Popcorn("#id-of-my-video")
var pop = Popcorn("#ourvideo");

pop.image({
       // seconds
       start: 2,
       // seconds
       end: 15,
       href: "",
       src: "{{ cricket.image.url }}",
       text: "DRUMBEAT",
       target: "footnotediv"
     });

pop.code({
  start: 2.2,
  end: 20.7,
  onStart: function() {
    document.querySelector("test").innerHTML = "United States";
  }
});

pop.listen("timeupdate",
function() {
       var progressBar = document.getElementById('progress-bar');
       var percentage = Math.floor((100 / pop.duration()) *
       pop.currentTime());
       progressBar.value = percentage;
       progressBar.innerHTML = percentage + '% played';
    }
);


// play the video right away
pop.play();



}, false);
</script>

<progress id='progress-bar' min='0' max='100' value='0'>0% played</progress>

<video nocontrols id="ourvideo">
  <source src="{{ MEDIA_URL }}/movies/test.webm" type="video/webm">
  <source src="{{ MEDIA_URL }}/movies/test.mp4" type="video/mp4">
  <source src="{{ MEDIA_URL }}/movies/test.ogg" type="video/ogg">
  I'm sorry; your browser doesn't support HTML5 video in WebM with VP8 or MP4 with H.264.
  <!-- You can embed a Flash player here, to play your mp4 video in older browsers -->
</video>
{% endblock %}
